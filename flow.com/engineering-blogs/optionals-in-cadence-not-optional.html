<!DOCTYPE html><!-- This site was created in Webflow. https://www.webflow.com --><!-- Last Published: Mon Jul 17 2023 22:17:53 GMT+0000 (Coordinated Universal Time) --><html data-wf-domain="flow-com.webflow.io" data-wf-page="637380c394c328ab5ad74bb3" data-wf-site="5f734f4dbd95382f4fdfa0ea" lang="en">
<!-- Mirrored from flow.com/engineering-blogs/optionals-in-cadence-not-optional by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 22 Jul 2023 16:23:35 GMT -->
<head><meta charset="utf-8"/><title>Optionals in Cadence? Not Optional!</title><meta content="Apr 22, 2021" name="description"/><meta content="Optionals in Cadence? Not Optional!" property="og:title"/><meta content="Apr 22, 2021" property="og:description"/><meta content="https://assets-global.website-files.com/618c953e65cc2ba3f44d1a02/639b2aa9a0ce5f6b195238e5_1_2H3NQ-tyw8QsYM_Hkl-gjA.webp" property="og:image"/><meta content="Optionals in Cadence? Not Optional!" property="twitter:title"/><meta content="Apr 22, 2021" property="twitter:description"/><meta content="https://assets-global.website-files.com/618c953e65cc2ba3f44d1a02/639b2aa9a0ce5f6b195238e5_1_2H3NQ-tyw8QsYM_Hkl-gjA.webp" property="twitter:image"/><meta property="og:type" content="website"/><meta content="summary_large_image" name="twitter:card"/><meta content="width=device-width, initial-scale=1" name="viewport"/><meta content="goOrjM0FiQtmK2lUJ9Y5NpPJA-fMUUc_6Q6Vmd7-XIY" name="google-site-verification"/><meta content="Webflow" name="generator"/><link href="../../assets-global.website-files.com/5f734f4dbd95382f4fdfa0ea/css/flow-com.webflow.9325b97a3.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/" rel="preconnect"/><link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin="anonymous"/><script src="../../ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script><script type="text/javascript">WebFont.load({  google: {    families: ["Epilogue:300,regular,500,600,700,800,900,italic"]  }});</script><script src="../../use.typekit.net/mgu2ukv.js" type="text/javascript"></script><script type="text/javascript">try{Typekit.load();}catch(e){}</script><script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script><link href="../../assets-global.website-files.com/5f734f4dbd95382f4fdfa0ea/616b1520779838b5f9174363_favicon.png" rel="shortcut icon" type="image/x-icon"/><link href="../../assets-global.website-files.com/5f734f4dbd95382f4fdfa0ea/616b1548fd01d005fc2bc2c7_logo256.png" rel="apple-touch-icon"/><link href="optionals-in-cadence-not-optional.html" rel="canonical"/><style>
  .w-webflow-badge {
    display: none !important;
  }
</style>


<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'../../www.googletagmanager.com/gtm5445.html?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PWSGFLB');</script>
<!-- End Google Tag Manager -->


<meta name="facebook-domain-verification" content="dhlb5fcuitl7owilmsg6xh307ohoyc" />

<!-- Hotjar Tracking Code for Flow.com -->
<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:3329982,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>
<link rel="stylesheet" href="../../cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" /></head><body><div data-animation="default" data-collapse="medium" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="navigation w-nav"><div class="nav-container w-container"><a href="../index.html" class="nav-logo-div w-nav-brand"><img src="https://assets-global.website-files.com/5f734f4dbd95382f4fdfa0ea/63ce603ae36f46f6bb67e51e_flow-logo.svg" loading="lazy" alt="flow logo" class="hide"/><div aria-label="Flow logo" class="nav-logo__embed w-embed"><svg width="100" height="42" viewBox="0 0 100 42" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_106_24812)">
<path class="logotype" d="M57.3672 20.9501H54.6797V30.971H50.9297V20.9501H48.9922V17.7376H50.9297V16.4876C50.9297 13.2501 52.9505 11.5876 56.0214 11.5876C56.4968 11.5916 56.9705 11.6475 57.4339 11.7543V15.5043C57.0296 15.3422 56.5985 15.2574 56.163 15.2543C55.9663 15.2387 55.7684 15.2659 55.5832 15.334C55.3979 15.4021 55.2296 15.5096 55.0899 15.6489C54.9501 15.7883 54.8422 15.9563 54.7735 16.1414C54.7049 16.3264 54.6771 16.5242 54.6922 16.721V17.7168H57.3797L57.3672 20.9501ZM63.013 30.971H59.2214V11.871H63.013V30.971Z" fill="black"/>
<path class="logotype" d="M71.4292 16.9085C72.851 16.906 74.2415 17.3255 75.4247 18.1139C76.6079 18.9023 77.5306 20.024 78.0758 21.3371C78.6211 22.6502 78.7644 24.0956 78.4876 25.4902C78.2108 26.8848 77.5264 28.1658 76.5211 29.1712C75.5157 30.1766 74.2346 30.861 72.84 31.1377C71.4454 31.4145 70.0001 31.2712 68.687 30.726C67.3739 30.1807 66.2521 29.2581 65.4638 28.0749C64.6754 26.8917 64.2559 25.5011 64.2584 24.0793C64.2466 23.1344 64.4241 22.1967 64.7803 21.3213C65.1365 20.446 65.6642 19.6508 66.3325 18.9826C67.0007 18.3144 67.7959 17.7866 68.6712 17.4304C69.5465 17.0742 70.4842 16.8968 71.4292 16.9085V16.9085ZM71.4292 27.596C73.3667 27.596 74.7625 25.9877 74.7625 24.0793C74.7834 23.6288 74.7126 23.1787 74.5544 22.7563C74.3963 22.3339 74.1541 21.9481 73.8424 21.622C73.5308 21.296 73.1562 21.0366 72.7414 20.8595C72.3266 20.6824 71.8802 20.5914 71.4292 20.5918C70.5213 20.6232 69.661 21.0058 69.0298 21.6592C68.3986 22.3125 68.0458 23.1855 68.0458 24.0939C68.0458 25.0024 68.3986 25.8753 69.0298 26.5286C69.661 27.182 70.5213 27.5647 71.4292 27.596Z" fill="black"/>
<path class="logotype" d="M82.5576 17.1875L84.9951 26.3542L87.4326 19.0708L86.7659 17.1917H90.5159L93.7284 26.3583L96.1076 17.1917H99.9992L95.9034 30.975H91.9701L89.2284 23.4167L86.6659 30.9708H82.7076L78.6367 17.1875H82.5576Z" fill="black"/>
<path d="M20.8333 41.8334C32.3393 41.8334 41.6667 32.506 41.6667 21.0001C41.6667 9.49415 32.3393 0.166748 20.8333 0.166748C9.3274 0.166748 0 9.49415 0 21.0001C0 32.506 9.3274 41.8334 20.8333 41.8334Z" fill="#00EF8B"/>
<path d="M29.9732 17.7417H24.0898V23.625H29.9732V17.7417Z" fill="white"/>
<path d="M18.2138 25.8292C18.2138 26.266 18.0843 26.6929 17.8416 27.0561C17.599 27.4192 17.2541 27.7023 16.8506 27.8694C16.447 28.0366 16.003 28.0803 15.5746 27.9951C15.1463 27.9099 14.7528 27.6996 14.4439 27.3907C14.1351 27.0819 13.9248 26.6884 13.8396 26.26C13.7544 25.8316 13.7981 25.3876 13.9652 24.9841C14.1324 24.5806 14.4154 24.2357 14.7786 23.993C15.1417 23.7504 15.5687 23.6209 16.0055 23.6209H18.2138V17.7417H16.0055C14.4059 17.7417 12.8423 18.216 11.5123 19.1047C10.1823 19.9934 9.14572 21.2564 8.5336 22.7342C7.92147 24.212 7.76131 25.8382 8.07337 27.407C8.38543 28.9758 9.15569 30.4169 10.2867 31.5479C11.4178 32.679 12.8589 33.4492 14.4277 33.7613C15.9965 34.0733 17.6226 33.9132 19.1004 33.3011C20.5782 32.6889 21.8413 31.6523 22.73 30.3224C23.6186 28.9924 24.093 27.4287 24.093 25.8292V23.6209H18.2138V25.8292Z" fill="white"/>
<path d="M26.2984 14.8001H32.9151V8.91675H26.2984C24.1542 8.91895 22.0984 9.77174 20.5821 11.288C19.0659 12.8042 18.2131 14.86 18.2109 17.0042V17.7417H24.0901V17.0042C24.0912 16.4193 24.3244 15.8587 24.7384 15.4454C25.1524 15.0322 25.7135 14.8001 26.2984 14.8001V14.8001Z" fill="white"/>
<path d="M18.2109 23.6209H24.0901V17.7417H18.2109V23.6209Z" fill="#00EF8B"/>
</g>
<defs>
<clipPath id="clip0_106_24812">
<rect width="100" height="41.6666" fill="white" transform="translate(0 0.166748)"/>
</clipPath>
</defs>
</svg></div></a><nav role="navigation" class="new-navigation-menu w-nav-menu"><div data-hover="false" data-delay="0" class="w-dropdown"><div class="new-nav-link w-dropdown-toggle"><div class="nav-link-text">Solutions</div><div class="nav-link-dropdown-icon w-icon-dropdown-toggle"></div></div><nav class="navigation-dropdown-list w-dropdown-list"><a href="../hybrid-custody.html" class="navigation-dropdown-link w-dropdown-link">Walletless Onboarding +Hybrid Custody</a><a href="http://developers.flow.com/hybrid-custody/guides/account-abstraction" target="_blank" class="navigation-dropdown-link icon w-dropdown-link">Account Abstraction</a><a href="https://developers.flow.com/cadence" target="_blank" class="navigation-dropdown-link icon w-dropdown-link">Cadence</a></nav></div><div data-hover="false" data-delay="0" class="w-dropdown"><div class="new-nav-link w-dropdown-toggle"><div class="nav-link-text">Developers</div><div class="nav-link-dropdown-icon w-icon-dropdown-toggle"></div></div><nav class="navigation-dropdown-list w-dropdown-list"><a href="https://developers.flow.com/" target="_blank" class="navigation-dropdown-link icon w-dropdown-link">Developer portal</a><a href="https://github.com/onflow" class="navigation-dropdown-link w-dropdown-link">GitHub</a></nav></div><div data-hover="false" data-delay="0" class="w-dropdown"><div class="new-nav-link w-dropdown-toggle"><div class="nav-link-text">Ecosystem</div><div class="nav-link-dropdown-icon w-icon-dropdown-toggle"></div></div><nav class="navigation-dropdown-list ecosystem w-dropdown-list"><a href="https://www.flowverse.co/" target="_blank" class="navigation-dropdown-link icon w-dropdown-link">Flowverse</a></nav></div><div data-hover="false" data-delay="0" class="w-dropdown"><div class="new-nav-link w-dropdown-toggle"><div class="nav-link-text">Community</div><div class="nav-link-dropdown-icon w-icon-dropdown-toggle"></div></div><nav class="navigation-dropdown-list community w-dropdown-list"><a href="../flow-ambassador-program.html" class="navigation-dropdown-link w-dropdown-link">Ambassador program</a><a href="../blog.html" class="navigation-dropdown-link w-dropdown-link">Blog</a><a href="https://forum.onflow.org/" target="_blank" class="navigation-dropdown-link icon w-dropdown-link">Forum</a><a href="https://discord.com/invite/J6fFnh2xx6" target="_blank" class="navigation-dropdown-link discord w-dropdown-link">Discord</a><a href="https://twitter.com/flow_blockchain" class="navigation-dropdown-link twitter w-dropdown-link">Twitter</a></nav></div><div data-hover="false" data-delay="100" class="w-dropdown"><div class="new-nav-link w-dropdown-toggle"><div class="nav-link-text">About</div><div class="nav-link-dropdown-icon w-icon-dropdown-toggle"></div></div><nav class="navigation-dropdown-list ecosystem w-dropdown-list"><a href="../primer.html" class="navigation-dropdown-link w-dropdown-link">Primer</a><a href="../priorities.html" class="navigation-dropdown-link w-dropdown-link">Priorities</a><a href="../use-cases.html" class="navigation-dropdown-link w-dropdown-link">Use Cases</a><a href="../flow-token-economics.html" class="navigation-dropdown-link w-dropdown-link">Token economics</a><a href="../technical-paper.html" class="navigation-dropdown-link w-dropdown-link">Technical papers</a><a href="../sustainability.html" class="navigation-dropdown-link w-dropdown-link">Sustainability</a></nav></div></nav><div class="new-menu-button w-nav-button"><div class="w-icon-nav-menu"></div></div></div></div><div><div class="post-with-image-layout"><div class="blog-post-hero-2 wf-section"><div class="post-container w-container"><div><div class="blog-post-meta-data in-post"><div class="w-dyn-list"><div role="list" class="eng-blog-category-list w-dyn-items"><div role="listitem" class="w-dyn-item"><a href="../engineering-categories/cadence.html" class="radius-text w-inline-block"><div class="eco-text-2">Cadence</div></a></div></div></div><div class="small-dot-sep inpost left"></div><div class="blog-post-meta-text-data">April 22, 2021</div></div><div class="main-blog-post-title">Optionals in Cadence? Not Optional!</div><div class="blog-post-meta-data post"><a href="../authors/joshua-hannan.html" class="blog-post-meta-text-data dark">Joshua Hannan</a><div class="small-dot-sep"></div><div class="blog-post-meta-text-data">Smart Contract Engineer at Dapper Labs</div></div></div></div></div><div class="blog-post-section wf-section"><div class="container-25 _1280 w-container"><div class="post-info-parent"><div class="post-share-sidebar"><div class="social-share-btn-2 tw"></div><div class="social-share-btn-2 email"></div><div class="share-text">Share</div></div><div class="post-main-info-div eng"><img loading="lazy" src="https://assets-global.website-files.com/618c953e65cc2ba3f44d1a02/639b2aa9a0ce5f6b195238e5_1_2H3NQ-tyw8QsYM_Hkl-gjA.webp" alt="Optionals in Cadence? Not Optional!" sizes="(max-width: 479px) 83vw, (max-width: 767px) 92vw, (max-width: 991px) 81vw, 750px" srcset="https://assets-global.website-files.com/618c953e65cc2ba3f44d1a02/639b2aa9a0ce5f6b195238e5_1_2H3NQ-tyw8QsYM_Hkl-gjA-p-500.webp 500w, https://assets-global.website-files.com/618c953e65cc2ba3f44d1a02/639b2aa9a0ce5f6b195238e5_1_2H3NQ-tyw8QsYM_Hkl-gjA-p-800.webp 800w, https://assets-global.website-files.com/618c953e65cc2ba3f44d1a02/639b2aa9a0ce5f6b195238e5_1_2H3NQ-tyw8QsYM_Hkl-gjA-p-1080.webp 1080w, https://assets-global.website-files.com/618c953e65cc2ba3f44d1a02/639b2aa9a0ce5f6b195238e5_1_2H3NQ-tyw8QsYM_Hkl-gjA.webp 1400w" class="blog-post-main-image"/><div class="blog-post-rich-text-block w-richtext"><p>Hello everyone! Welcome to my bi-weekly blog about Cadence, the new smart contract programming language for the <a href="https://www.onflow.org/" target="_blank">Flow Blockchain</a>. If you are a newcomer, check out <a href="https://joshuahannan.medium.com/taking-your-first-steps-with-cadence-19dde86bbd0">my introductory blog post to get started!</a></p><p>Today, I‚Äôm going to talk about an aspect of Cadence that many people have a lot of trouble fully wrapping their heads around: Optionals!</p><p>Optionals are like the Schr√∂dinger‚Äôs Cat of programming languages.</p><p>Or are they?</p><p>Sorry, bad analogy, but you‚Äôll understand where I am coming from when you‚Äôre done reading.</p><figure class="w-richtext-figure-type- "><div><img alt="" src="../../assets-global.website-files.com/618c953e65cc2ba3f44d1a02/639b2aa5c2c3c0b8ed3d9364_1_pccxbH9FmN9zxWG5dyvuLA.png"/></div></figure><h3>What are Optionals?</h3><p>Optionals in Cadence are a safe and powerful way to use variables in programming languages. They can be difficult to get familiar with though!</p><p>Optionals say either ‚Äúthere <em>is</em> a value, and it is <em>x</em>‚Äù or ‚Äúthere <em>isn‚Äôt</em> a value at all‚Äù. So the value either has been set or, more importantly, has not been set. Optionals default to nil (which technically is a value) when they don‚Äôt have a value of their specific type.</p><p>Any type can be an optional. You declare an optional type by using a ? after the regular variable declaration, like so:</p><div class="w-embed"><pre><code class="language-markup"><!--
// Declare a String Optional
var name: String?
}--!></code></pre></div><p>When assigning to an optional, you can assign to it as if the type was non-optional:</p><div class="w-embed"><pre><code class="language-markup"><!--
name = "Josh"
}--!></code></pre></div><p>but you can also assign the value nil to the optional.</p><div class="w-embed"><pre><code class="language-markup"><!--
name = nil
}--!></code></pre></div><h3>Why would I want to say something is nil?</h3><p>Optionals allow software to be able to handle error cases and similar situations more gracefully.</p><p>The main goal is to make the unavailabe/empty/nothing state of a variable explicit, and even more so, make it explicit when something cannot ever be unavailabe/empty/nothing.<br/>In languages that allow any variable to be null, it‚Äôs often not clear if the variable could be null at the specific location of the code, which leads to two problems:</p><ul role="list"><li>Either the null case isn‚Äôt handled by the programmer, and then there is a null value, causing a null-dereference, i.e. crash;</li><li>Or the null case is considered by the programmer, and they add defensive checks to handle the supposed null-case, though it actually never occurs, causing unnessary overhead.</li></ul><p>Here is an example:</p><p>Lets say we are using the field that I defined above in a contract, but not as an optional:</p><div class="w-embed"><pre><code class="language-markup"><!--
pub contract NameHolder {
    pub var name: String
}
}--!></code></pre></div><p>If the value hasn‚Äôt been set yet, but someone wants to read it, how do we communicate that it hasn‚Äôt been set? We could just return an empty string, but that is effectively the same as returning any non-empty string, so the reader might not know that an empty string means that it hasn‚Äôt been set yet and make a mistake assuming that everything is ok.</p><p>If we make the field optional:</p><div class="w-embed"><pre><code class="language-markup"><!--
pub contract NameHolder {
    pub var name: String?
}
}--!></code></pre></div><p>Then it becomes very clear to the reader. If they try to read name and they get nil back, then they can easily handle the error and do whatever they need to do in that case. There is no confusion there. nil means nil.</p><p>In Cadence, fields in composite types are required to be initialized, so this exact problem won‚Äôt come up very often, but you will often see similar cases that are slightly more complex.</p><p>For example, the values in dictionaries are all optionals. You can initialize a dictionary to be empty like this:</p><div class="w-embed"><pre><code class="language-markup"><!--
let lastNameDictionary: {String: String} = {"Josh": "Hannan"}
}--!></code></pre></div><p>But since there are an infinite possible number of key-value pairs, if you try to access any one of them, it will return an optional, even if the value exists for the key you provide!</p><div class="w-embed"><pre><code class="language-markup"><!--
let lastNameDictionary: {String: String} = {"Josh": "Hannan"}
// Both of these cause an error:
// Invalid: mismatched types. expected `String`, got `String?
let existingName: String = lastNameDictionary["Josh"]
let newName: String = lastNameDictionary["Kayla"]
}--!></code></pre></div><h3>How do I handle Optionals?</h3><p>If left to their own devices, optionals can be a handful!</p><figure class="w-richtext-figure-type- "><div><img alt="" src="https://assets-global.website-files.com/618c953e65cc2ba3f44d1a02/639b2aa5f0c6c2724830f4cb_1*nSwqKtEWqWv5wAjEk6Lh3A.jpeg"/></div><figcaption>How do we get you out of there??? Guess we have to unwrap the box!</figcaption></figure><p>Values of optional variables are still considered to be wrapped in the optional. ‚ÄúWrapped‚Äù is a term that means that we still don‚Äôt know whether or not the value is nil or not. If you try to perform a normal operation that you could usually perform with the type you are using, it will fail the Cadence type checker:</p><div class="w-embed"><pre><code class="language-markup"><!--
let x: Int? = 2
// Invalid: cannot apply binary operation + to types: `Int?`, `Int`
let y = x + 2
}--!></code></pre></div><p>Even though both arguments specify some form of Int , xis still wrapped, so the program doesn‚Äôt actually know if it is nil or not. It won‚Äôt let us perform a mathematical operation with it because you can‚Äôt add nil and a number! That would explode the universe!!!!</p><p>You need to unwrap the value from its optional first, then perform the operation.</p><p>This also applies to composite types. If you have a composite type that is optional, you need to unwrap the optional before you can call any of its methods or access any of its fields.</p><p>Here is a simple example:</p><div class="w-embed"><pre><code class="language-markup"><!--
pub contract HelloWorld {
    pub resource OptionalHello {
        pub fun hello(): String {
            return "hello"
        }
    }
    access(self) let helloResource: @OptionalHello?
    init() {
        self.helloResource <- create OptionalHello()
    }
    // Public function that returns our friendly greeting!
    pub fun hello(): String {
        return self.helloResource.hello()
    }
}
}--!></code></pre></div><p>So if you see an error like this:</p><div class="w-embed"><pre><code class="language-markup"><!--
value of type `HelloWorld.OptionalHello?` has no member `hello`. unknown member
}--!></code></pre></div><p>Look for the ? at the end of the type name. The object is often still a wrapped optional and it needs to be unwrapped before calling the hello method. (better error messages are also coming in the future) üòÉ</p><h3>Unwrapping Optionals</h3><p>There are multiple different ways to unwrap optionals, and they all have different behavior and are used for different use-cases.</p><h3>Nil-Coalescing Operator</h3><p>The <a href="https://docs.onflow.org/cadence/language/values-and-types/#nil-coalescing-operator" target="_blank">nil-coalescing operator</a> ?? returns the value inside an optional if it contains a value, or returns a specified alternative value if the optional has no value, i.e., the optional value is nil.</p><p>If the left-hand side is non-nil, the right-hand side is not evaluated.</p><p><a href="https://docs.onflow.org/cadence/language/values-and-types#nil-coalescing-operator" target="_blank">See the Cadence docs for more info</a> about the nil-coalescing operator.</p><p>You probably will see this used a lot when borrowing references to capabilities and resources. It is possible to put any code on the right side of the ?? so if a borrow fails, it returns an optional that is nil , but in many cases, if a borrow fails, then the transaction should fail. The nil-coalescing operator allows us to panic and print an error message so the state is reverted and the caller knows exactly what went wrong.</p><p>For example, when we borrow a reference to an account‚Äôs FlowToken receiver, we usually use this:</p><div class="w-embed"><pre><code class="language-markup"><!--
// Get a reference to the recipient's Receiver        
let receiverCap = getAccount(to).getCapability(/public/flowTokenReceiver)
      
let receiverRef = receiverCap.borrow<&{FungibleToken.Receiver}>()
    ?? panic("Could not borrow receiver reference")
}--!></code></pre></div><p>If borrow succeeds, it returns a valid reference. If it fails, it returns nil . Therefore, the type of the return value is &amp;{FungibleToken.Receiver}? and we need to unwrap it before we can use it.</p><h3>Force-Unwrap</h3><p>Another more succinct way of unwrapping an optional value is to use the force-unwrap operator (! ). The force unwrap will get the value of the optional if it exists, or it will panic and abort if it doesn‚Äôt.</p><figure class="w-richtext-figure-type- "><div><img alt="" src="https://assets-global.website-files.com/618c953e65cc2ba3f44d1a02/639b2aa5f0c6c247e730f4cc_1*QL8nrzSr7sn8M53dkgtT8Q.png"/></div><figcaption>This optional does not want to be unwrapped</figcaption></figure><div class="w-embed"><pre><code class="language-markup"><!--
let a: Int? = 3
let b: Int = a!   // Will succeed and return 3
let c: Int? = nil
let d: Int = c!   // Will panic and abort at runtime
}--!></code></pre></div><p><a href="https://docs.onflow.org/cadence/language/values-and-types/#force-unwrap-" target="_blank">See the Cadence docs for more information and examples of force-unwrap.</a></p><p>If a force-unwrap fails, it only prints a generic error message about failing when trying to force unwrap. Because of this, you should be very careful about where you use force-unwrap, because if it fails, it will be much harder for you to determine where the error is coming from.</p><p>You should only use the force-unwrap operator in places where you are absolutely sure that the value isn‚Äôt going to be nil . For example, if you have already checked that it isn‚Äôt nil in a pre-condition, then you know that when you force-unwrap, you‚Äôll be safe.</p><h3>Optional Binding</h3><p>Another powerful way to unwrap and handle optionals is via optional binding, a method that allows you to include the unwrapping in a conditional that executes different blocks of code depending on how the unwrapping went.</p><p>Optional Biding is a variant of the if-statement that conditionally executes a body of code if an optional is nil or not.</p><p><a href="https://docs.onflow.org/cadence/language/control-flow/#optional-binding" target="_blank">See the cadence docs for examples of optional binding</a></p><p>Optional binding is a thorough way to handle different cases for optionals, because it gives you the most flexibility with how your program can behave.</p><p>If nil is an expected potential value for an optional in your program, and you have many operations you need to perform in that case, then optional binding is the way to go.</p><h3>Optional Chaining</h3><p>Last but not least, we have optional chaining. Sometimes, there are composite types that are optional, because they are stored in a dictionary, or are returned as optionals from a function that retrieves them. If you want to call a function on an optional composite type, you can use optional chaining to ‚Äúoptionally‚Äù call that function. If the object you are calling is nil , it will just not execute any function and move on and return nil .</p><p><a href="https://docs.onflow.org/cadence/language/composite-types#accessing-fields-and-functions-of-composite-types-using-optional-chaining" target="_blank">See the Cadence docs for more info and examples.</a></p><h3>Conclusion</h3><p>Optionals are an important feature of many languages and learning to use them properly is important for writing clean and secure code so make sure you understand this well!</p><p>I hope this post has been informative and useful!</p><figure class="w-richtext-figure-type- "><div><img alt="" src="https://assets-global.website-files.com/618c953e65cc2ba3f44d1a02/639b2aa566f04f62781f3922_1*Bt7h4pwGTISjTwHrzTjypw.png"/></div><figcaption>Thanks to Pekoe, one of our models for this week‚Äôs blog post</figcaption></figure><p>Flow Discord: <a href="https://discord.gg/flow" target="_blank">https://discord.gg/flow</a></p><p>Flow Forum: <a href="https://forum.onflow.org/latest" target="_blank">https://forum.onflow.org</a></p><p>Flow Github: <a href="https://github.com/onflow/flow" target="_blank">https://github.com/onflow/flow</a></p><p>See you next week! üëã</p><p><em>Thank you to the cats of Axoim Zen for starring in this post!</em></p><p><em>And thank you to Bastian and Supun for reviewing this, plus Alyssa for the amazing graphics!</em></p></div><div class="tags-post-div"><div class="tags-title-14">Tags:</div><div class="w-dyn-list"><div role="list" class="tag-cloud w-dyn-items"><div role="listitem" class="w-dyn-item"><div class="tags-title">Smart Contracts</div></div><div role="listitem" class="w-dyn-item"><div class="tags-title">Blockchain</div></div><div role="listitem" class="w-dyn-item"><div class="tags-title">Optionals</div></div><div role="listitem" class="w-dyn-item"><div class="tags-title">Programming</div></div><div role="listitem" class="w-dyn-item"><div class="tags-title">Cats</div></div></div></div></div></div></div></div></div></div><div class="post-with-text-layout hide"><div class="blog-post-hero-2 no-image wf-section"><div class="post-container w-container"><div><div class="blog-post-meta-data in-post"><div class="blog-post-category">Studio</div><div class="small-dot-sep"></div><div class="blog-post-meta-text-data">03/30/2021</div></div><div class="main-blog-post-title">Welcoming Animoca, MotoGP, and StarGirl to Flow</div><div class="blog-post-meta-data post"><div class="blog-post-meta-text-data dark">Mik Naayem</div><div class="small-dot-sep"></div><div class="blog-post-meta-text-data">CBO and Cofounder at Dapper Labs</div></div></div></div></div><div class="blog-post-section wf-section"><div class="container-25 _1280 w-container"><div class="post-info-parent no-img"><div class="post-share-sidebar"><div class="social-share-btn-2 tw"></div><div class="social-share-btn-2 email"></div><div class="share-text">Share</div></div><div class="post-main-info-div"><div class="blog-post-rich-text w-richtext"><p>The rich text element allows you to create and format headings, paragraphs, blockquotes, images, and video all in one place instead of having to add and format them individually. Just double-click and easily create content.</p><ul role="list"><li>Decentralized because you can set up a blockchain system so that every entity can only make changes within its predefined purview. Companies can also use permissionless, permissioned, or hybrid-approach blockchains, allowing for useful trade-offs between network security and system privacy.</li><li>Decentralized because you can set up a blockchain system so that every entity can only make changes within its predefined purview. Companies can also use permissionless, permissioned, or hybrid-approach blockchains, allowing for useful trade-offs between network security and system privacy.</li><li>scscsssc</li></ul><h4>Static and dynamic content editing</h4><blockquote>A rich text element can be used with static or dynamic content. For static content, just drop it into any page and begin editing. For dynamic content, add a<a href="http://www.google.com"> rich text field to any collection</a> and then connect a rich text element to that field in the settings panel. Voila!</blockquote><h4>How to customize formatting for each rich text</h4><p>Headings, paragraphs, blockquotes, figures, images, and figure captions can all be styled after a class is added to the rich text element using the &quot;When inside of&quot; nested selector system.</p></div></div></div></div></div></div><div class="section-32 wf-section"><div class="container-25 _1280 w-container"><div class="title-div-3"><div>Related Content</div></div><div class="w-dyn-list"><div role="list" class="w-dyn-items"><div role="listitem" class="w-dyn-item"><div class="blog-post-parant-div first"><div class="blog-post-info-div"><a href="/engineering-blogs/upgrading-flows-consensus-follower-to-boost-attack-resilience-and-processing-speed" class="blog-post-title">Upgrading Flow&#x27;s Consensus Follower to boost attack resilience and processing speed</a><div class="blog-post-meta-data"><div class="blog-post-meta-text-data">May 30, 2023</div><div class="small-dot-sep"></div><div class="blog-post-meta-text-data">Jordan Schalm</div></div></div></div></div><div role="listitem" class="w-dyn-item"><div class="blog-post-parant-div first"><div class="blog-post-info-div"><a href="/engineering-blogs/jolteon-advancing-flows-consensus-algorithm" class="blog-post-title">Jolteon: Advancing Flow‚Äôs consensus algorithm</a><div class="blog-post-meta-data"><div class="blog-post-meta-text-data">Apr 14, 2023</div><div class="small-dot-sep"></div><div class="blog-post-meta-text-data">Jordan Schalm</div></div></div></div></div><div role="listitem" class="w-dyn-item"><div class="blog-post-parant-div first"><div class="blog-post-info-div"><a href="/engineering-blogs/golang-services-improving-observability" class="blog-post-title">Improving Observability of GoLang Services</a><div class="blog-post-meta-data"><div class="blog-post-meta-text-data">Jan 31, 2023</div><div class="small-dot-sep"></div><div class="blog-post-meta-text-data">Alexey Ivanov</div></div></div></div></div></div></div></div></div></div><div class="section footer wf-section"><div class="footer-div"><div class="join-text-2 no-hover">Join Flow on</div><a href="https://twitter.com/flow_blockchain" target="_blank" class="join-text-2">Twitter</a><a href="https://discord.com/invite/J6fFnh2xx6" target="_blank" class="join-text-2">Discord</a><a href="https://flow.com/" target="_blank" class="join-text-2">flow.com</a></div></div><div class="new-footer wf-section"><div class="container w-container"><div class="w-layout-grid _3-footer-grid"><div><a id="w-node-ec243fb8-8059-5bdb-528d-ce0b082ca18b-082ca187" href="/" class="footer-logo-link w-inline-block"><img src="https://assets-global.website-files.com/5f734f4dbd95382f4fdfa0ea/63ce603ae36f46f6bb67e51e_flow-logo.svg" loading="lazy" alt="flow logo" class="footer-logo-img"/></a><div class="footer-social-icons"><a href="https://twitter.com/flow_blockchain" target="_blank" class="footer-social-icon w-inline-block"><img src="https://assets-global.website-files.com/5f734f4dbd95382f4fdfa0ea/63cec770abbeba426e358f76_Twitter%20-%20Negative.svg" loading="lazy" alt="social icon"/></a><a href="https://www.instagram.com/flowblockchain" target="_blank" class="footer-social-icon w-inline-block"><img src="https://assets-global.website-files.com/5f734f4dbd95382f4fdfa0ea/63cec770799e2958d15306a0_Instagram%20-%20Negative.svg" loading="lazy" alt="social icon"/></a><a href="https://www.youtube.com/@FlowBlockchain" target="_blank" class="footer-social-icon w-inline-block"><img src="https://assets-global.website-files.com/5f734f4dbd95382f4fdfa0ea/63cec77005a49eaba248e147_YouTube%20-%20Negative.svg" loading="lazy" alt="social icon"/></a><a href="https://t.me/flow_blockchain" target="_blank" class="footer-social-icon w-inline-block"><img src="https://assets-global.website-files.com/5f734f4dbd95382f4fdfa0ea/63cec770b75d5482a08014db_Telegram%20-%20Negative.svg" loading="lazy" alt="social icon"/></a><a href="https://discord.com/invite/J6fFnh2xx6" target="_blank" class="footer-social-icon last w-inline-block"><img src="https://assets-global.website-files.com/5f734f4dbd95382f4fdfa0ea/63d0398494fe5d96e72f4cc0_Social%20Icon.svg" loading="lazy" alt="social icon"/></a></div></div><div id="w-node-_843ebe60-d3a2-032c-780e-737a5989cba0-082ca187"><div class="footer-column-header">Start Building</div><a href="https://developers.flow.com/" target="_blank" class="new-footer-link">Developer portal</a><a href="https://github.com/onflow" target="_blank" class="new-footer-link">GitHub</a></div><div id="w-node-ec243fb8-8059-5bdb-528d-ce0b082ca19f-082ca187"><div class="footer-column-header">Flow</div><a href="https://docs.google.com/forms/d/e/1FAIpQLSer5ZX0pRWsXF0U0bsgW4Zo8Pmlw0V927ZydDq_ej-qyIJ9_A/viewform" target="_blank" class="new-footer-link">Business Development</a><a href="https://flow.com/node-operation" target="_blank" class="new-footer-link">Node Operation</a><a href="/token-distribution" class="new-footer-link">Token Distribution</a><a href="/mediakit" class="new-footer-link">Media Kit</a><a href="/careers" class="new-footer-link">Careers</a><a href="/faq" class="new-footer-link">FAQ</a></div><div id="w-node-ec243fb8-8059-5bdb-528d-ce0b082ca198-082ca187"><div class="footer-column-header">Get Connected</div><a href="https://port.onflow.org/" target="_blank" class="new-footer-link">Flow Port</a><a href="https://www.flowverse.co/" target="_blank" class="new-footer-link">Flowverse</a></div></div><div class="div-block-129"><div class="footer-copyright">¬© 2023 All Rights Reserved</div></div></div></div><script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=5f734f4dbd95382f4fdfa0ea" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script><script src="https://assets-global.website-files.com/5f734f4dbd95382f4fdfa0ea/js/webflow.2724f1538.js" type="text/javascript"></script><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NHJB3BPPXG"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-NHJB3BPPXG');
</script>

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PWSGFLB"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --><script src="../../cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="../../cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.js"></script></body>
<!-- Mirrored from flow.com/engineering-blogs/optionals-in-cadence-not-optional by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 22 Jul 2023 16:23:37 GMT -->
</html>