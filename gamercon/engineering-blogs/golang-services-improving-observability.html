<!DOCTYPE html><!-- This site was created in Webflow. https://www.webflow.com --><!-- Last Published: Mon Jul 17 2023 22:17:53 GMT+0000 (Coordinated Universal Time) --><html data-wf-domain="flow-com.webflow.io" data-wf-page="637380c394c328ab5ad74bb3" data-wf-site="5f734f4dbd95382f4fdfa0ea" lang="en">
<!-- Mirrored from flow.com/engineering-blogs/golang-services-improving-observability by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 22 Jul 2023 16:22:23 GMT -->
<head><meta charset="utf-8"/><title>Improving Observability of GoLang Services</title><meta content="Jan 31, 2023" name="description"/><meta content="Improving Observability of GoLang Services" property="og:title"/><meta content="Jan 31, 2023" property="og:description"/><meta content="https://assets-global.website-files.com/618c953e65cc2ba3f44d1a02/6418d3cd7c6d624843a412b5_Blog%20Image%20-%20Improving%20Observability%20of%20Golang%20Services.png" property="og:image"/><meta content="Improving Observability of GoLang Services" property="twitter:title"/><meta content="Jan 31, 2023" property="twitter:description"/><meta content="https://assets-global.website-files.com/618c953e65cc2ba3f44d1a02/6418d3cd7c6d624843a412b5_Blog%20Image%20-%20Improving%20Observability%20of%20Golang%20Services.png" property="twitter:image"/><meta property="og:type" content="website"/><meta content="summary_large_image" name="twitter:card"/><meta content="width=device-width, initial-scale=1" name="viewport"/><meta content="goOrjM0FiQtmK2lUJ9Y5NpPJA-fMUUc_6Q6Vmd7-XIY" name="google-site-verification"/><meta content="Webflow" name="generator"/><link href="../../assets-global.website-files.com/5f734f4dbd95382f4fdfa0ea/css/flow-com.webflow.9325b97a3.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/" rel="preconnect"/><link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin="anonymous"/><script src="../../ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script><script type="text/javascript">WebFont.load({  google: {    families: ["Epilogue:300,regular,500,600,700,800,900,italic"]  }});</script><script src="../../use.typekit.net/mgu2ukv.js" type="text/javascript"></script><script type="text/javascript">try{Typekit.load();}catch(e){}</script><script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script><link href="../../assets-global.website-files.com/5f734f4dbd95382f4fdfa0ea/616b1520779838b5f9174363_favicon.png" rel="shortcut icon" type="image/x-icon"/><link href="../../assets-global.website-files.com/5f734f4dbd95382f4fdfa0ea/616b1548fd01d005fc2bc2c7_logo256.png" rel="apple-touch-icon"/><link href="golang-services-improving-observability.html" rel="canonical"/><style>
  .w-webflow-badge {
    display: none !important;
  }
</style>


<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'../../www.googletagmanager.com/gtm5445.html?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PWSGFLB');</script>
<!-- End Google Tag Manager -->


<meta name="facebook-domain-verification" content="dhlb5fcuitl7owilmsg6xh307ohoyc" />

<!-- Hotjar Tracking Code for Flow.com -->
<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:3329982,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>
<link rel="stylesheet" href="../../cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" /></head><body><div data-animation="default" data-collapse="medium" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="navigation w-nav"><div class="nav-container w-container"><a href="../index.html" class="nav-logo-div w-nav-brand"><img src="https://assets-global.website-files.com/5f734f4dbd95382f4fdfa0ea/63ce603ae36f46f6bb67e51e_flow-logo.svg" loading="lazy" alt="flow logo" class="hide"/><div aria-label="Flow logo" class="nav-logo__embed w-embed"><svg width="100" height="42" viewBox="0 0 100 42" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_106_24812)">
<path class="logotype" d="M57.3672 20.9501H54.6797V30.971H50.9297V20.9501H48.9922V17.7376H50.9297V16.4876C50.9297 13.2501 52.9505 11.5876 56.0214 11.5876C56.4968 11.5916 56.9705 11.6475 57.4339 11.7543V15.5043C57.0296 15.3422 56.5985 15.2574 56.163 15.2543C55.9663 15.2387 55.7684 15.2659 55.5832 15.334C55.3979 15.4021 55.2296 15.5096 55.0899 15.6489C54.9501 15.7883 54.8422 15.9563 54.7735 16.1414C54.7049 16.3264 54.6771 16.5242 54.6922 16.721V17.7168H57.3797L57.3672 20.9501ZM63.013 30.971H59.2214V11.871H63.013V30.971Z" fill="black"/>
<path class="logotype" d="M71.4292 16.9085C72.851 16.906 74.2415 17.3255 75.4247 18.1139C76.6079 18.9023 77.5306 20.024 78.0758 21.3371C78.6211 22.6502 78.7644 24.0956 78.4876 25.4902C78.2108 26.8848 77.5264 28.1658 76.5211 29.1712C75.5157 30.1766 74.2346 30.861 72.84 31.1377C71.4454 31.4145 70.0001 31.2712 68.687 30.726C67.3739 30.1807 66.2521 29.2581 65.4638 28.0749C64.6754 26.8917 64.2559 25.5011 64.2584 24.0793C64.2466 23.1344 64.4241 22.1967 64.7803 21.3213C65.1365 20.446 65.6642 19.6508 66.3325 18.9826C67.0007 18.3144 67.7959 17.7866 68.6712 17.4304C69.5465 17.0742 70.4842 16.8968 71.4292 16.9085V16.9085ZM71.4292 27.596C73.3667 27.596 74.7625 25.9877 74.7625 24.0793C74.7834 23.6288 74.7126 23.1787 74.5544 22.7563C74.3963 22.3339 74.1541 21.9481 73.8424 21.622C73.5308 21.296 73.1562 21.0366 72.7414 20.8595C72.3266 20.6824 71.8802 20.5914 71.4292 20.5918C70.5213 20.6232 69.661 21.0058 69.0298 21.6592C68.3986 22.3125 68.0458 23.1855 68.0458 24.0939C68.0458 25.0024 68.3986 25.8753 69.0298 26.5286C69.661 27.182 70.5213 27.5647 71.4292 27.596Z" fill="black"/>
<path class="logotype" d="M82.5576 17.1875L84.9951 26.3542L87.4326 19.0708L86.7659 17.1917H90.5159L93.7284 26.3583L96.1076 17.1917H99.9992L95.9034 30.975H91.9701L89.2284 23.4167L86.6659 30.9708H82.7076L78.6367 17.1875H82.5576Z" fill="black"/>
<path d="M20.8333 41.8334C32.3393 41.8334 41.6667 32.506 41.6667 21.0001C41.6667 9.49415 32.3393 0.166748 20.8333 0.166748C9.3274 0.166748 0 9.49415 0 21.0001C0 32.506 9.3274 41.8334 20.8333 41.8334Z" fill="#00EF8B"/>
<path d="M29.9732 17.7417H24.0898V23.625H29.9732V17.7417Z" fill="white"/>
<path d="M18.2138 25.8292C18.2138 26.266 18.0843 26.6929 17.8416 27.0561C17.599 27.4192 17.2541 27.7023 16.8506 27.8694C16.447 28.0366 16.003 28.0803 15.5746 27.9951C15.1463 27.9099 14.7528 27.6996 14.4439 27.3907C14.1351 27.0819 13.9248 26.6884 13.8396 26.26C13.7544 25.8316 13.7981 25.3876 13.9652 24.9841C14.1324 24.5806 14.4154 24.2357 14.7786 23.993C15.1417 23.7504 15.5687 23.6209 16.0055 23.6209H18.2138V17.7417H16.0055C14.4059 17.7417 12.8423 18.216 11.5123 19.1047C10.1823 19.9934 9.14572 21.2564 8.5336 22.7342C7.92147 24.212 7.76131 25.8382 8.07337 27.407C8.38543 28.9758 9.15569 30.4169 10.2867 31.5479C11.4178 32.679 12.8589 33.4492 14.4277 33.7613C15.9965 34.0733 17.6226 33.9132 19.1004 33.3011C20.5782 32.6889 21.8413 31.6523 22.73 30.3224C23.6186 28.9924 24.093 27.4287 24.093 25.8292V23.6209H18.2138V25.8292Z" fill="white"/>
<path d="M26.2984 14.8001H32.9151V8.91675H26.2984C24.1542 8.91895 22.0984 9.77174 20.5821 11.288C19.0659 12.8042 18.2131 14.86 18.2109 17.0042V17.7417H24.0901V17.0042C24.0912 16.4193 24.3244 15.8587 24.7384 15.4454C25.1524 15.0322 25.7135 14.8001 26.2984 14.8001V14.8001Z" fill="white"/>
<path d="M18.2109 23.6209H24.0901V17.7417H18.2109V23.6209Z" fill="#00EF8B"/>
</g>
<defs>
<clipPath id="clip0_106_24812">
<rect width="100" height="41.6666" fill="white" transform="translate(0 0.166748)"/>
</clipPath>
</defs>
</svg></div></a><nav role="navigation" class="new-navigation-menu w-nav-menu"><div data-hover="false" data-delay="0" class="w-dropdown"><div class="new-nav-link w-dropdown-toggle"><div class="nav-link-text">Solutions</div><div class="nav-link-dropdown-icon w-icon-dropdown-toggle"></div></div><nav class="navigation-dropdown-list w-dropdown-list"><a href="../hybrid-custody.html" class="navigation-dropdown-link w-dropdown-link">Walletless Onboarding +Hybrid Custody</a><a href="http://developers.flow.com/hybrid-custody/guides/account-abstraction" target="_blank" class="navigation-dropdown-link icon w-dropdown-link">Account Abstraction</a><a href="https://developers.flow.com/cadence" target="_blank" class="navigation-dropdown-link icon w-dropdown-link">Cadence</a></nav></div><div data-hover="false" data-delay="0" class="w-dropdown"><div class="new-nav-link w-dropdown-toggle"><div class="nav-link-text">Developers</div><div class="nav-link-dropdown-icon w-icon-dropdown-toggle"></div></div><nav class="navigation-dropdown-list w-dropdown-list"><a href="https://developers.flow.com/" target="_blank" class="navigation-dropdown-link icon w-dropdown-link">Developer portal</a><a href="https://github.com/onflow" class="navigation-dropdown-link w-dropdown-link">GitHub</a></nav></div><div data-hover="false" data-delay="0" class="w-dropdown"><div class="new-nav-link w-dropdown-toggle"><div class="nav-link-text">Ecosystem</div><div class="nav-link-dropdown-icon w-icon-dropdown-toggle"></div></div><nav class="navigation-dropdown-list ecosystem w-dropdown-list"><a href="https://www.flowverse.co/" target="_blank" class="navigation-dropdown-link icon w-dropdown-link">Flowverse</a></nav></div><div data-hover="false" data-delay="0" class="w-dropdown"><div class="new-nav-link w-dropdown-toggle"><div class="nav-link-text">Community</div><div class="nav-link-dropdown-icon w-icon-dropdown-toggle"></div></div><nav class="navigation-dropdown-list community w-dropdown-list"><a href="../flow-ambassador-program.html" class="navigation-dropdown-link w-dropdown-link">Ambassador program</a><a href="../blog.html" class="navigation-dropdown-link w-dropdown-link">Blog</a><a href="https://forum.onflow.org/" target="_blank" class="navigation-dropdown-link icon w-dropdown-link">Forum</a><a href="https://discord.com/invite/J6fFnh2xx6" target="_blank" class="navigation-dropdown-link discord w-dropdown-link">Discord</a><a href="https://twitter.com/flow_blockchain" class="navigation-dropdown-link twitter w-dropdown-link">Twitter</a></nav></div><div data-hover="false" data-delay="100" class="w-dropdown"><div class="new-nav-link w-dropdown-toggle"><div class="nav-link-text">About</div><div class="nav-link-dropdown-icon w-icon-dropdown-toggle"></div></div><nav class="navigation-dropdown-list ecosystem w-dropdown-list"><a href="../primer.html" class="navigation-dropdown-link w-dropdown-link">Primer</a><a href="../priorities.html" class="navigation-dropdown-link w-dropdown-link">Priorities</a><a href="../use-cases.html" class="navigation-dropdown-link w-dropdown-link">Use Cases</a><a href="../flow-token-economics.html" class="navigation-dropdown-link w-dropdown-link">Token economics</a><a href="../technical-paper.html" class="navigation-dropdown-link w-dropdown-link">Technical papers</a><a href="../sustainability.html" class="navigation-dropdown-link w-dropdown-link">Sustainability</a></nav></div></nav><div class="new-menu-button w-nav-button"><div class="w-icon-nav-menu"></div></div></div></div><div><div class="post-with-image-layout"><div class="blog-post-hero-2 wf-section"><div class="post-container w-container"><div><div class="blog-post-meta-data in-post"><div class="w-dyn-list"><div role="list" class="eng-blog-category-list w-dyn-items"><div role="listitem" class="w-dyn-item"><a href="../engineering-categories/blockchain.html" class="radius-text w-inline-block"><div class="eco-text-2">Blockchain</div></a></div><div role="listitem" class="w-dyn-item"><a href="../engineering-categories/observability.html" class="radius-text w-inline-block"><div class="eco-text-2">Observability</div></a></div></div></div><div class="small-dot-sep inpost left"></div><div class="blog-post-meta-text-data">January 31, 2023</div></div><div class="main-blog-post-title">Improving Observability of GoLang Services</div><div class="blog-post-meta-data post"><a href="../authors/alexey-ivanov.html" class="blog-post-meta-text-data dark">Alexey Ivanov</a><div class="small-dot-sep"></div><div class="blog-post-meta-text-data">Performance Engineer @ Flow</div></div></div></div></div><div class="blog-post-section wf-section"><div class="container-25 _1280 w-container"><div class="post-info-parent"><div class="post-share-sidebar"><div class="social-share-btn-2 tw"></div><div class="social-share-btn-2 email"></div><div class="share-text">Share</div></div><div class="post-main-info-div eng"><img loading="lazy" src="../../assets-global.website-files.com/618c953e65cc2ba3f44d1a02/6418d3cd7c6d624843a412b5_Blog%20Image%20-%20Improving%20Observability%20of%20Golang%20Services.png" alt="Improving Observability of GoLang Services" sizes="(max-width: 479px) 83vw, (max-width: 767px) 92vw, (max-width: 991px) 81vw, 750px" srcset="https://assets-global.website-files.com/618c953e65cc2ba3f44d1a02/6418d3cd7c6d624843a412b5_Blog%20Image%20-%20Improving%20Observability%20of%20Golang%20Services-p-500.png 500w, https://assets-global.website-files.com/618c953e65cc2ba3f44d1a02/6418d3cd7c6d624843a412b5_Blog%20Image%20-%20Improving%20Observability%20of%20Golang%20Services-p-800.png 800w, https://assets-global.website-files.com/618c953e65cc2ba3f44d1a02/6418d3cd7c6d624843a412b5_Blog%20Image%20-%20Improving%20Observability%20of%20Golang%20Services-p-1080.png 1080w, https://assets-global.website-files.com/618c953e65cc2ba3f44d1a02/6418d3cd7c6d624843a412b5_Blog%20Image%20-%20Improving%20Observability%20of%20Golang%20Services.png 1600w" class="blog-post-main-image"/><div class="blog-post-rich-text-block w-richtext"><p>This blog post is aimed at GoLang developers who are looking to improve the observability of their services. It skips the basics and jumps straight to advanced topics, such as asynchronous structured logging, metrics with exemplars, tracing with TraceQL, aggregating pprof and continuous profiling, microbenchmarks and basic statistics with benchstat, blackbox performance tests, and basic PID controllers for determining a system&#x27;s maximum load. We&#x27;ll also briefly touch on current research in the observability space, including active casual profiling and passive critical section detection.</p><h2>The Three Pillars of Observability: Logs, Metrics, Traces</h2><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth" style="max-width:1512pxpx" class="w-richtext-align-fullwidth w-richtext-figure-type-image"><div><img src="../../assets-global.website-files.com/618c953e65cc2ba3f44d1a02/63d9a7e24e74fc82d1848fd2_untitled%402x%20(2).png" loading="lazy" alt=""/></div></figure><p>If you&#x27;re reading this, you likely don&#x27;t need a refresher on the basics of observability. Let&#x27;s dive into the non-obvious stuff and focus on making it as easy as possible <a href="https://grafana.com/blog/2020/03/31/how-to-successfully-correlate-metrics-logs-and-traces-in-grafana/" target="_blank">to move between the three main observability surfaces</a>. We&#x27;ll also discuss how to add tracing to the mix so that pprof data can be linked to tracing and back.</p><p>If you&#x27;re instead looking for a short and straightforward introduction to monitoring basics and ways to quickly introduce basic observability into your service, “Distributed Systems Observability” by <a href="https://twitter.com/copyconstruct" target="_blank">Cindy Sridharan</a> is a great place to start.</p><h3>Structured Logging</h3><p>Logging can become a bottleneck if you&#x27;re not using a zero-allocation logging library. If you haven&#x27;t already, consider using zap or zerolog – both are great choices.</p><div class="w-embed"><style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;}
.tg td{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
  overflow:hidden;padding:10px 5px;word-break:normal;}
.tg th{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
  font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;}
.tg .tg-0lax{text-align:left;vertical-align:top}
</style>
<table class="tg">
<thead>
  <tr>
    <th class="tg-0lax">zerolog</th>
    <th class="tg-0lax">767 ns/op</th>
    <th class="tg-0lax">552 B/op</th>
    <th class="tg-0lax">6 allocs/op</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td class="tg-0lax">zap</td>
    <td class="tg-0lax">848 ns/op</td>
    <td class="tg-0lax">704 B/op</td>
    <td class="tg-0lax">2 allocs/op</td>
  </tr>
  <tr>
    <td class="tg-0lax">go-kit</td>
    <td class="tg-0lax">3614 ns/op</td>
    <td class="tg-0lax">2895 B/op</td>
    <td class="tg-0lax">66 allocs/op</td>
  </tr>
  <tr>
    <td class="tg-0lax">logrus</td>
    <td class="tg-0lax">5661 ns/op</td>
    <td class="tg-0lax">6092 B/op</td>
    <td class="tg-0lax">78 allocs/op</td>
  </tr>
</tbody>
</table></div><p>Golang has also an ongoing proposal for introducing structured logging: <a href="https://pkg.go.dev/golang.org/x/exp/slog" target="_blank">slog</a>. Be sure to check it out and provide feedback on the <a href="https://github.com/golang/go/issues/56345" target="_blank">proposal</a>!</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth" style="max-width:3020pxpx" class="w-richtext-align-fullwidth w-richtext-figure-type-image"><div><img src="../../assets-global.website-files.com/618c953e65cc2ba3f44d1a02/63d94d800038c30d276fad8b_Screen%20Shot%202023-01-10%20at%2011.16.09%20PM.png" loading="lazy" alt=""/></div><figcaption>Up-to-date benchmarks can be found on <a href="http://hackemist.com/logbench/">Logbench</a></figcaption></figure><p>Structured logging is essential for extracting data from logs. Adopting a json or logfmt format simplifies ad-hoc troubleshooting and allows for quick and dirty graphs/alerts while you work on proper metrics. Most log libraries also have ready-to-use hooks for gRPC/HTTP clients and servers, as well as common database clients, which greatly simplifies their introduction into existing codebases.</p><p>If you find text-based formats inefficient, you can optimize your logging to a great extent. For instance, <a href="https://github.com/rs/zerolog#binary-encoding" target="_blank">zerolog supports binary CBOR format</a>, and <a href="https://www.envoyproxy.io/docs/envoy/latest/api-v3/data/accesslog/v3/accesslog.proto" target="_blank">Envoy has protobufs</a> for their structured access logs.</p><p>In some cases, logs themselves can become performance bottlenecks. You don&#x27;t want your service to get stuck because Docker can&#x27;t pull events out of the stderr pipe fast enough when you enable DEBUG logs.</p><p>One solution is to sample your logs:</p><div class="w-embed"><pre><code class="language-markup"><!--
sampled := log.Sample(zerolog.LevelSampler{
    DebugSampler: &zerolog.BurstSampler{
        Burst: 5,
        Period: 1*time.Second,
        NextSampler: &zerolog.BasicSampler{N: 100},
    },
})
--!></code></pre></div><p>Alternatively, you can make their emission fully asynchronous, so they never block:</p><div class="w-embed"><pre><code class="language-markup"><!--
wr := diode.NewWriter(os.Stdout, 1000, 10*time.Millisecond, func(missed int) {
		fmt.Printf("Logger Dropped %d messages", missed)
	})
log := zerolog.New(wr)
--!></code></pre></div><p>One additional note for those of you using Grafana and Loki: you likely want to set up <a href="https://grafana.com/docs/grafana/latest/datasources/loki/#configure-derived-fields" target="_blank">derived fields</a>. This way, you can extract fields from logs and put them into arbitrary URLs.</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth" style="max-width:2060pxpx" class="w-richtext-align-fullwidth w-richtext-figure-type-image"><div><img src="https://assets-global.website-files.com/618c953e65cc2ba3f44d1a02/63d94eb8536dd733b68c814d_Screen%20Shot%202023-01-10%20at%2011.39.44%20PM.png" loading="lazy" alt=""/></div><figcaption>An example of one-click navigation between logs, traces, and third-party resources.</figcaption></figure><p>Consider including a trace ID in every log message if the context indicates that tracing should be enabled. You’ll thank yourself later for that.</p><h3>Metrics</h3><p>Let&#x27;s assume you&#x27;re already using Prometheus-style metrics in your service. But what do you do when you see a spike on your graph and need to figure out what caused the slowdown (spoiler: it&#x27;s probably the database)? Wouldn&#x27;t it be great to jump from the metric directly to the trace of the slow request? If so, <a href="https://pkg.go.dev/github.com/prometheus/client_golang/prometheus#ExemplarAdder" target="_blank">ExemplarAdder</a> and <a href="https://pkg.go.dev/github.com/prometheus/client_golang/prometheus#ExemplarObserver" target="_blank">ExemplarObserver</a> are for you:</p><div class="w-embed"><pre><code class="language-markup"><!--
ctx := r.Context()
traceID := trace.SpanContextFromContext(ctx).TraceID.String()
requestDurations.(prometheus.ExemplarObserver).ObserveWithExemplar(
				time.Since(now).Seconds(), prometheus.Labels{"traceID": traceID}
})
--!></code></pre></div><p>Note that you can put not only a trace_id but also arbitrary key-value data into the labels, which is especially useful for multi-tenant environments where you can include user_id or team_id. This can be a cost-effective solution to the high-cardinality metrics problem.</p><h3>Trace</h3><p>Tracing is essential for performance analysis in today&#x27;s world, so most services have it enabled. The industry&#x27;s journey to tracing has been a bumpy one, <a href="https://thenewstack.io/opentelemetrys-past-present-and-future-explained/">from OpenTracing to OpenCensus and now OpenTelemetry</a>. We use a common setup with the OTEL libraries for trace emission and Grafana Tempo as the backend.</p><p>Flow&#x27;s blockchain trace emission is distinct from a typical web backend: we don&#x27;t rely on the trace context passed between trust boundaries, so instead of propagating TraceIDs, we deterministically construct them based on the object being processed - a hash of a block or transaction hash.</p><p>The issue with tracing is not the emission of data, but rather the ability to locate &quot;interesting&quot; data. Default Grafana&#x27;s search capabilities are quite limited, and it can sometimes take minutes to find the desired trace.</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth" style="max-width:1926pxpx" class="w-richtext-align-fullwidth w-richtext-figure-type-image"><div><img src="https://assets-global.website-files.com/618c953e65cc2ba3f44d1a02/63d94fa3fa2b0dd117ba84ff_Screen%20Shot%202023-01-15%20at%202.48.42%20PM.png" loading="lazy" alt=""/></div><figcaption>Standard trace Search interface</figcaption></figure><p><a href="https://github.com/grafana/tempo/blob/main/docs/design-proposals/2022-04%20TraceQL%20Concepts.md#summary" target="_blank">TraceQL</a> solves this issue by introducing a convenient way of searching traces. Finding a specific trace is now a breeze. Here are a few examples from the reference documentation:</p><div class="w-embed"><pre><code class="language-markup"><!--
# A trace has INSERTs that on average are longer than 1s:
{ span.db.statement =~ "INSERT.*"} | avg(duration) > 1s

# A trace has over 5 spans with http.status = 200 in any given namespace:
{ span.http.status = 200 } | by(resource.namespace) | count() > 5

# A trace passed through two regions (in any order):
{ resource.region = "eu-west-0" } && { resource.region = "eu-west-1" }
--!></code></pre></div><p>If you prefer video format, here is <a href="https://mobile.twitter.com/actually_chores" target="_blank">Joe Elliott’s</a> introduction to <a href="https://youtu.be/zVHHeO8tAWQ?t=1067" target="_blank">TraceQL from GrafanaCon 2022</a>.</p><p>Now, with TraceQL, we can be as specific as we desire:</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth" style="max-width:2892pxpx" class="w-richtext-align-fullwidth w-richtext-figure-type-image"><div><img src="https://assets-global.website-files.com/618c953e65cc2ba3f44d1a02/63d9509a4697f05fe9026789_Screen%20Shot%202023-01-15%20at%203.01.41%20PM.png" loading="lazy" alt=""/></div><figcaption>{.network = &quot;mainnet20&quot; &amp;&amp; span.transaction.ContractFunctionCall = &quot;e467b9dd11fa00df.FlowStorageFees.calculateAccountsCapacity&quot; &amp;&amp; duration &gt; 1ms }</figcaption></figure><p>If you&#x27;re using the Grafana, don&#x27;t forget to link your log data source to your traces. This will make it easy to navigate between traces and logs:</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth" style="max-width:2204pxpx" class="w-richtext-align-fullwidth w-richtext-figure-type-image"><div><img src="https://assets-global.website-files.com/618c953e65cc2ba3f44d1a02/63d950b5c6d2b175f415c2c3_Screen%20Shot%202023-01-15%20at%203.05.18%20PM.png" loading="lazy" alt=""/></div><figcaption>LInking traces back to logs (and possibly metrics)</figcaption></figure><p>Optimizing TraceQL queries can be achieved by having common per-process attributes in your &quot;resources&quot;. This is much faster than searching and can make a huge difference. For example, in the screenshot above we have a bug where env and network should have been emitted as resources instead of attributes.</p><h3>Profiling</h3><p>The Go runtime offers excellent profiling capabilities. If you want to instrument your code beyond net/http/pprof, we highly recommend reading  <a href="https://github.com/DataDog/go-profiler-notes/blob/main/guide/README.md" target="_blank">DataDog’s “The Busy Developer&#x27;s Guide to Go Profiling, Tracing and Observability”</a>.  It goes into detail into all profiler types (<a href="https://github.com/DataDog/go-profiler-notes/blob/main/guide/README.md#go-profilers" target="_blank">CPU, Memory, Block, etc.</a>) and covers low-level implementation details such as <a href="https://github.com/DataDog/go-profiler-notes/blob/main/stack-traces.md" target="_blank">stack trace internals</a> and <a href="https://github.com/DataDog/go-profiler-notes/blob/main/pprof.md" target="_blank">pprof format</a>.</p><p>Many of the profiling features require a new Go runtime for quick and accurate operation. If you intend to rely on profiling data in production, especially if you plan to use continuous profiling, please upgrade to Go 1.19.</p><p>Once you have the raw pprof file, you&#x27;ll want to analyze it. However, go tool pprof -http 5000 has its limits. The ideal solution would be to store profiles in a database that supports basic querying and filtering. We use <a href="https://cloud.google.com/profiler/docs/profiling-go" target="_blank">Google’s Cloud Profiler</a>, but instead of relying on their somewhat limited client libraries, we take advantage of their “offline API,” which <a href="https://github.com/googleapis/googleapis/blob/d4599ad2c2374feb1b508096cbd89e6e3079eb24/google/devtools/cloudprofiler/v2/profiler.proto#L65-L73" target="_blank">allows us to ship existing</a> .pprof files to Google:</p><div class="w-embed"><pre><code class="language-markup"><!--
profileBytes, _ := os.ReadFile(filename)
client.CreateOfflineProfile(ctx, &pb.CreateOfflineProfileRequest{
	Parent: projectId,
	Profile: &pb.Profile{
		ProfileType:  profileType,
		Deployment:   deployment,
		ProfileBytes: profileBytes,
	},
})
--!></code></pre></div><p>The main benefit of sending profiles to remote storage compared to simply storing them locally is the ability to aggregate multiple profiles into a single view.</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth" style="max-width:2938pxpx" class="w-richtext-align-fullwidth w-richtext-figure-type-image"><div><img src="https://assets-global.website-files.com/618c953e65cc2ba3f44d1a02/63d951eec6665011d80fbd1d_Screen%20Shot%202023-01-15%20at%204.03.05%20PM.png" loading="lazy" alt=""/></div><figcaption>Aggregated profile viewer UI.</figcaption></figure><p>Additionally, it gives us the ability to look at profile trends over time.</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth" style="max-width:1254pxpx" class="w-richtext-align-fullwidth w-richtext-figure-type-image"><div><img src="https://assets-global.website-files.com/618c953e65cc2ba3f44d1a02/63d95204eb99807b11696067_Screen%20Shot%202023-01-15%20at%204.12.34%20PM.png" loading="lazy" alt=""/></div><figcaption>An example of the historic trends top N graph.</figcaption></figure><p>Sadly, the Google’s &quot;Offline&quot; API is heavily rate- and size-limited and appears to be generally unsupported, so we are actively exploring alternatives. Since we are already using the Grafana stack, we are keeping an eye on <a href="https://grafana.com/oss/phlare/" target="_blank">Phlare</a>’s development; it looks like a very capable replacement:</p><figure class="w-richtext-figure-type-image w-richtext-align-center" class="w-richtext-align-center w-richtext-figure-type-image"><div><img src="https://assets-global.website-files.com/618c953e65cc2ba3f44d1a02/63d9526f4ffb4a49d15b49b8_A%20demo%20of%20Phlare%20from%20their%20github_%20(1).gif" loading="lazy" alt=""/></div><figcaption><a href="https://github.com/grafana/phlare" target="_blank">A demo of Phlare from their github</a>.</figcaption></figure><h3>Connecting profiling with tracing</h3><p>We&#x27;ve invested a lot of effort in the user experience of performance analysis, ensuring smooth transitions between logs, traces, and metrics. However, profiling data is currently a unique challenge. To address this, we&#x27;re exploring <a href="https://pkg.go.dev/runtime/pprof#Do" target="_blank">pprof.Do</a> (or alternatively, <a href="https://pkg.go.dev/runtime/pprof#SetGoroutineLabels" target="_blank">pprof.SetGoroutineLabels</a> at a lower level). This would enable us to create a connection between profiling and tracing that is currently missing.</p><div class="w-embed"><pre><code class="language-markup"><!--
pprof.Do(
		ctx,
		pprof.Labels(
				"span", fmt.Sprintf("%s", span)
		),
		func(ctx context.Context) {
				doWork(ctx)
		},
)
--!></code></pre></div><p>Labels have a few drawbacks: they are not supported for all profile types and can increase profile size, so be mindful of label cardinality.</p><p>You can add arbitrary labels here, which is especially useful in multi-tenant environments. For example, you can annotate pprofs with a tenant&#x27;s UserID and TeamID. Even for single-tenant setups, annotating profiles with EndpointPath may provide additional insight into CPU usage.</p><h3>fgprof</h3><p>Go&#x27;s default profiler has a downside of only being able to view either On-CPU or Off-CPU time.   <a href="https://twitter.com/felixge" target="_blank">Felix Geisendörfer</a>’s profiler, <a href="https://github.com/felixge/fgprof" target="_blank">fgprof</a>, solves this issue by providing a single view that captures both.</p><h3>Continuous Profiling</h3><p>Profiling is now cheap enough that many companies provide libraries for continuous profiling in production, which has become a trend. Notable examples include <a href="https://pyroscope.io/docs/golang/">Pyroscope</a>, <a href="https://docs.datadoghq.com/profiler/enabling/go/">DataDog</a>, and <a href="https://cloud.google.com/profiler/docs/profiling-go">Google</a>.</p><p>Rather than embedding a profiler into the codebase, Grafana Phlare employs an agent model that periodically scrapes Go&#x27;s pprof HTTP endpoints located at /debug/pprof/:</p><div class="w-embed"><pre><code class="language-markup"><!--
scrape_configs:
  - job_name: 'default'
    scrape_interval: 10s
		profiling_config:
		  path_prefix: "/debug/pprof"
		  pprof_config:
		    memory:
		      enabled: true
		      path: "/allocs"
		      delta: true
# ...
--!></code></pre></div><h3>eBPF-based Profiling</h3><p>All profiling features above require some kind of instrumentation in the binary, whether it be an HTTP endpoint or a continuous profiling library. Recently, there has been a trend in observability towards instrumentation-less profiling enabled by eBPF.</p><p>For instance, <a href="https://github.com/parca-dev/parca">Parca</a> enables you to observe uninstrumented C, C++, Rust, Go, and more!</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth" style="max-width:2556pxpx" class="w-richtext-align-fullwidth w-richtext-figure-type-image"><div><img src="https://assets-global.website-files.com/618c953e65cc2ba3f44d1a02/63d953105676ed1601b06452_Screen%20Shot%202023-01-08%20at%204.58.25%20PM.png" loading="lazy" alt=""/></div><figcaption><a href="https://demo.parca.dev/" target="_blank">Parca UI Demo</a></figcaption></figure><h3>bpftrace/bcc profiling</h3><p>Parca is relying exclusively on perf_events which is totally safe. Meanwhile, if you try a naive profiling approach utilizing uprobe / uretprobe with either <a href="https://github.com/iovisor/bcc/issues/1320" target="_blank">bcc</a> or <a href="https://github.com/iovisor/bpftrace/issues/970" target="_blank">bpftrace</a> on a Go application you will likely encounter a SIGBUS due to Go&#x27;s <a href="https://gcc.gnu.org/legacy-ml/gcc/2015-09/msg00177.html" target="_blank">stack copying</a>.</p><h3>Microbenchmarks</h3><p>Microbenchmarking in Go is a well-known practice, so there&#x27;s not much to say about it. However, there are a couple of things worth mentioning. Firstly, it&#x27;s recommended to use test.benchmem and run &#x27;^$&#x27; when running microbenchmarks.</p><p>Secondly, benchmark results should only be considered valid when -count is greater or equal to 10:</p><div class="w-embed"><pre><code class="language-markup"><!--
$ go test -count 10 -bench 'Benchmark.*TokenTransfer' -benchmem -run '^$' ./
goos: darwin
goarch: arm64
pkg: github.com/onflow/cadence/runtime
BenchmarkFungibleTokenTransfer-8 6638	179964 ns/op 104511 B/op 1966 allocs/op
BenchmarkFungibleTokenTransfer-8 6458 179890 ns/op 103890 B/op 1966 allocs/op
BenchmarkFungibleTokenTransfer-8 6853 180334 ns/op 104513 B/op 1966 allocs/op
...
--!></code></pre></div><p>Finally, the <a href="https://pkg.go.dev/golang.org/x/perf/cmd/benchstat" target="_blank">benchstat</a> tool (or similar) should always be employed when analyzing a single benchmark result to enhance readability and guarantee the absence of noise in the environment:</p><div class="w-embed"><pre><code class="language-markup"><!--
$ benchstat go1.20rc1
name                            time/op
FungibleTokenTransfer-8  180µs ± 0%
name                            alloc/op
FungibleTokenTransfer-8  105kB ± 1%
name                            allocs/op
FungibleTokenTransfer-8  1.97k ± 0%
--!></code></pre></div><p>Noise can be a serious problem in the benchmarking environments. LLVM project has great documentation on <a href="https://llvm.org/docs/Benchmarking.html" target="_blank">how to tune Linux systems for less than 0.1% variation in benchmarks</a>.</p><p>Additionally, when making comparisons, especially when claiming performance improvements, it is essential to show statistic:</p><div class="w-embed"><pre><code class="language-markup"><!--
$ benchstat go1.19 go1.20rc1
name                            old time/op    new time/op    delta
FungibleTokenTransfer-8     182µs ± 2%     180µs ± 0%  -1.33%  (p=0.021 n=10+8)
name                            old alloc/op   new alloc/op   delta
FungibleTokenTransfer-8     105kB ± 1%     105kB ± 1%    ~     (p=0.363 n=10+10)
name                            old allocs/op  new allocs/op  delta
FungibleTokenTransfer-8     1.97k ± 0%     1.97k ± 0%  -0.10%  (p=0.000 n=10+10)
--!></code></pre></div><p>Don&#x27;t be shy about adding custom metrics to your tests to gain more insight into your performance reports from critical sections. Utilize <a href="https://pkg.go.dev/testing#B.ReportMetric" target="_blank">b.ReportMetric</a> and <a href="https://pkg.go.dev/testing#B.ResetTimer" target="_blank">b.ResetTimer</a> to optimize them.</p><p>It would be nice to have an open-source or SaaS tool that could gather and track microbenchmark results over time for a Go repository; however, we did not find one.</p><h3>Blackbox Performance Tests</h3><p>While there are a variety of tools for end-to-end performance testing web applications (e.g., we use <a href="https://github.com/grafana/k6">grafana/k6</a> for testing ours), complex systems such as compilers or databases require custom blackbox tests, also known as macrobenchmarks. Here are a few good examples of automated macrobenchmarks in large open source projects (the benchmark frameworks themselves are also open sourced).</p><p>Vitess, a distributed database, has a very comprehensive (albeit slightly noisy) nightly performance test that tracks both <a href="https://benchmark.vitess.io/microbench">micro</a>- and <a href="https://benchmark.vitess.io/macrobench">macro</a>-benchmark results. The test framework is open sourced at <a href="https://github.com/vitessio/arewefastyet">https://github.com/vitessio/arewefastyet</a>.</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth" style="max-width:1092pxpx" class="w-richtext-align-fullwidth w-richtext-figure-type-image"><div><img src="https://assets-global.website-files.com/618c953e65cc2ba3f44d1a02/63d9548e477441747a78cab9_Screen%20Shot%202023-01-15%20at%208.04.02%20PM.png" loading="lazy" alt=""/></div></figure><p><a href="https://perf.rust-lang.org/" target="_blank">Rust is another good example of an excellent benchmark framework</a> for all kinds of compiler-specific tests done on a per-commit basis. It is also open sourced at: <a href="https://github.com/rust-lang/rustc-perf" target="_blank">https://github.com/rust-lang/rustc-perf</a>.</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth" style="max-width:2557pxpx" class="w-richtext-align-fullwidth w-richtext-figure-type-image"><div><img src="https://assets-global.website-files.com/618c953e65cc2ba3f44d1a02/63d954a804729f662414cdf9_Screen%20Shot%202023-01-15%20at%208.03.01%20PM.png" loading="lazy" alt=""/></div></figure><p>Our end-to-end setup is relatively trivial compared to these two, but still has a couple of interesting details. One of them is detecting the system overload point. Since blockchain is asynchronous and can queue transactions on multiple layers in our end-to-end macrobenchmark, we need to find the maximum transaction-per-second value that blockchain can handle without excessive latencies. We used to use <a href="https://en.wikipedia.org/wiki/Additive_increase/multiplicative_decrease" target="_blank">TCP&#x27;s additive-increase/multiplicative-decrease (AIMD) algorithm</a> for that, but it was quite slow to converge. Recently, we switched to a PID controller (<a href="https://github.com/onflow/flow-go/pull/3735" target="_blank">a PD controller, to be exact</a>) instead, which has a nice property of quickly converging to the desired queue size while also not overshooting too much:</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth" style="max-width:2000pxpx" class="w-richtext-align-fullwidth w-richtext-figure-type-image"><div><img src="https://assets-global.website-files.com/618c953e65cc2ba3f44d1a02/63d954b9e87bf7270bccc633_An%20example%20of%20our%20Token%20Transfer%20benchmark%20converging%20to%20a%20stable%20state_.png" loading="lazy" alt=""/></div><figcaption>An example of our Token Transfer benchmark converging to a stable state.</figcaption></figure><p>If you&#x27;re interested in introducing PID controllers into your own systems, Philipp K. Janert&#x27;s book, &quot;Feedback Control for Computer Systems: Introducing Control Theory to Enterprise Programmers,&quot; is a great place to start. If you&#x27;re more of a visual learner, the first couple of lectures from the &quot;<a href="https://www.youtube.com/playlist?list=PLn8PRpmsu08pQBgjxYFXSsODEF3Jqmm-y" target="_blank">Understanding PID Control</a>&quot; YouTube playlist are also a great introduction. Just keep in mind that this is the <a href="https://www.youtube.com/@MATLAB" target="_blank">MATLAB</a> channel, so it goes deep quickly. You&#x27;ve been warned =)</p><h2>Future work</h2><p>Here we’ll go over things that we are planning on adding to our performance observability toolkit this year.</p><h3>Bottleneck detection through slowing things down</h3><p>It can be difficult to speed things up, but slowing them down is relatively straightforward. Therefore, one way to identify bottlenecks is to try slowing system components by 1ms, 5ms, 50ms, 250ms, etc., and measure the benchmark results. Then, extrapolate the function back to -1ms, -5ms, -50ms, etc. This method is approximate, but it works well for small values.</p><h3>Casual profiler</h3><p>A casual profiler is another active method and a more precise generalization of the previous one. Instead of slowing down the component of interest, it slows down everything else around it, thus emulating the speedup of the component being tested.</p><p>If you are interested in casual profiling there is a good video introduction to in “<a href="https://youtu.be/jE0V-p1odPg?t=34">Coz: finding code that counts with causal profiling</a>” (SOSP&#x27;15).</p><h3>Automatic critical path analysis</h3><p>Analyzing the critical path of a large-scale distributed system can be challenging. In their OSDI’14 paper, &quot;<a href="https://web.eecs.umich.edu/~twenisch/papers/osdi14.pdf">The Mystery Machine: End-to-End Performance Analysis of Large-Scale Internet Services</a>,&quot; University of Michigan and Facebook proposed a way to identify the critical path passively by observing logs (which are likely more similar to traces nowadays). This approach has the benefit of stacking nicely with both tracing and profiling infrastructure.</p><h1>Appendix A. AI-driven blogpost editor.</h1><p>Not related to Golang observability, but generally applicable to those who write blog posts: English may not be your native language, so first drafts of blog posts can be quite painful for an editor to fix. This often requires multiple hours (and likely even a bottle of whiskey) to put back forgotten articles, rephrase sentences, fight the urge to send me a <a href="https://youtu.be/LjdCFat9rjI?t=17">Conjunction Junction</a> video, fix punctuation and idioms. Modern language models can take away much of this pain. For example, the first pass of editing this post was done by text-davinci-003 (talk about overkill!) with the following prompt:</p><p>You are a technical blog editor reviewing a post about &quot;Improving Observability of Golang Services.&quot; Please, rewrite the following paragraph correcting spelling, idioms, punctuation, and word choices as necessary. Combine, split sentences, or rewrite to increase clarity when needed. Don&#x27;t make it too dry, humor is fine.</p></div><div class="tags-post-div"><div class="tags-title-14">Tags:</div><div class="w-dyn-list"><div role="list" class="tag-cloud w-dyn-items"><div role="listitem" class="w-dyn-item"><div class="tags-title">Blockchain</div></div><div role="listitem" class="w-dyn-item"><div class="tags-title">Coding</div></div><div role="listitem" class="w-dyn-item"><div class="tags-title">Computer Science</div></div><div role="listitem" class="w-dyn-item"><div class="tags-title">Flow Blockchain</div></div></div></div></div></div></div></div></div></div><div class="post-with-text-layout hide"><div class="blog-post-hero-2 no-image wf-section"><div class="post-container w-container"><div><div class="blog-post-meta-data in-post"><div class="blog-post-category">Studio</div><div class="small-dot-sep"></div><div class="blog-post-meta-text-data">03/30/2021</div></div><div class="main-blog-post-title">Welcoming Animoca, MotoGP, and StarGirl to Flow</div><div class="blog-post-meta-data post"><div class="blog-post-meta-text-data dark">Mik Naayem</div><div class="small-dot-sep"></div><div class="blog-post-meta-text-data">CBO and Cofounder at Dapper Labs</div></div></div></div></div><div class="blog-post-section wf-section"><div class="container-25 _1280 w-container"><div class="post-info-parent no-img"><div class="post-share-sidebar"><div class="social-share-btn-2 tw"></div><div class="social-share-btn-2 email"></div><div class="share-text">Share</div></div><div class="post-main-info-div"><div class="blog-post-rich-text w-richtext"><p>The rich text element allows you to create and format headings, paragraphs, blockquotes, images, and video all in one place instead of having to add and format them individually. Just double-click and easily create content.</p><ul role="list"><li>Decentralized because you can set up a blockchain system so that every entity can only make changes within its predefined purview. Companies can also use permissionless, permissioned, or hybrid-approach blockchains, allowing for useful trade-offs between network security and system privacy.</li><li>Decentralized because you can set up a blockchain system so that every entity can only make changes within its predefined purview. Companies can also use permissionless, permissioned, or hybrid-approach blockchains, allowing for useful trade-offs between network security and system privacy.</li><li>scscsssc</li></ul><h4>Static and dynamic content editing</h4><blockquote>A rich text element can be used with static or dynamic content. For static content, just drop it into any page and begin editing. For dynamic content, add a<a href="http://www.google.com"> rich text field to any collection</a> and then connect a rich text element to that field in the settings panel. Voila!</blockquote><h4>How to customize formatting for each rich text</h4><p>Headings, paragraphs, blockquotes, figures, images, and figure captions can all be styled after a class is added to the rich text element using the &quot;When inside of&quot; nested selector system.</p></div></div></div></div></div></div><div class="section-32 wf-section"><div class="container-25 _1280 w-container"><div class="title-div-3"><div>Related Content</div></div><div class="w-dyn-list"><div role="list" class="w-dyn-items"><div role="listitem" class="w-dyn-item"><div class="blog-post-parant-div first"><div class="blog-post-info-div"><a href="/engineering-blogs/upgrading-flows-consensus-follower-to-boost-attack-resilience-and-processing-speed" class="blog-post-title">Upgrading Flow&#x27;s Consensus Follower to boost attack resilience and processing speed</a><div class="blog-post-meta-data"><div class="blog-post-meta-text-data">May 30, 2023</div><div class="small-dot-sep"></div><div class="blog-post-meta-text-data">Jordan Schalm</div></div></div></div></div><div role="listitem" class="w-dyn-item"><div class="blog-post-parant-div first"><div class="blog-post-info-div"><a href="/engineering-blogs/jolteon-advancing-flows-consensus-algorithm" class="blog-post-title">Jolteon: Advancing Flow’s consensus algorithm</a><div class="blog-post-meta-data"><div class="blog-post-meta-text-data">Apr 14, 2023</div><div class="small-dot-sep"></div><div class="blog-post-meta-text-data">Jordan Schalm</div></div></div></div></div><div role="listitem" class="w-dyn-item"><div class="blog-post-parant-div first"><div class="blog-post-info-div"><a href="/engineering-blogs/flow-blockchain-programming-language-smart-contract-cadence-solidity-comparison-ethereum" class="blog-post-title">Cadence or Solidity: On-Chain Token Transfer Deep Dive</a><div class="blog-post-meta-data"><div class="blog-post-meta-text-data">Jan 24, 2023</div><div class="small-dot-sep"></div><div class="blog-post-meta-text-data">Jerome Pimmel</div></div></div></div></div></div></div></div></div></div><div class="section footer wf-section"><div class="footer-div"><div class="join-text-2 no-hover">Join Flow on</div><a href="https://twitter.com/flow_blockchain" target="_blank" class="join-text-2">Twitter</a><a href="https://discord.com/invite/J6fFnh2xx6" target="_blank" class="join-text-2">Discord</a><a href="https://flow.com/" target="_blank" class="join-text-2">flow.com</a></div></div><div class="new-footer wf-section"><div class="container w-container"><div class="w-layout-grid _3-footer-grid"><div><a id="w-node-ec243fb8-8059-5bdb-528d-ce0b082ca18b-082ca187" href="/" class="footer-logo-link w-inline-block"><img src="https://assets-global.website-files.com/5f734f4dbd95382f4fdfa0ea/63ce603ae36f46f6bb67e51e_flow-logo.svg" loading="lazy" alt="flow logo" class="footer-logo-img"/></a><div class="footer-social-icons"><a href="https://twitter.com/flow_blockchain" target="_blank" class="footer-social-icon w-inline-block"><img src="https://assets-global.website-files.com/5f734f4dbd95382f4fdfa0ea/63cec770abbeba426e358f76_Twitter%20-%20Negative.svg" loading="lazy" alt="social icon"/></a><a href="https://www.instagram.com/flowblockchain" target="_blank" class="footer-social-icon w-inline-block"><img src="https://assets-global.website-files.com/5f734f4dbd95382f4fdfa0ea/63cec770799e2958d15306a0_Instagram%20-%20Negative.svg" loading="lazy" alt="social icon"/></a><a href="https://www.youtube.com/@FlowBlockchain" target="_blank" class="footer-social-icon w-inline-block"><img src="https://assets-global.website-files.com/5f734f4dbd95382f4fdfa0ea/63cec77005a49eaba248e147_YouTube%20-%20Negative.svg" loading="lazy" alt="social icon"/></a><a href="https://t.me/flow_blockchain" target="_blank" class="footer-social-icon w-inline-block"><img src="https://assets-global.website-files.com/5f734f4dbd95382f4fdfa0ea/63cec770b75d5482a08014db_Telegram%20-%20Negative.svg" loading="lazy" alt="social icon"/></a><a href="https://discord.com/invite/J6fFnh2xx6" target="_blank" class="footer-social-icon last w-inline-block"><img src="https://assets-global.website-files.com/5f734f4dbd95382f4fdfa0ea/63d0398494fe5d96e72f4cc0_Social%20Icon.svg" loading="lazy" alt="social icon"/></a></div></div><div id="w-node-_843ebe60-d3a2-032c-780e-737a5989cba0-082ca187"><div class="footer-column-header">Start Building</div><a href="https://developers.flow.com/" target="_blank" class="new-footer-link">Developer portal</a><a href="https://github.com/onflow" target="_blank" class="new-footer-link">GitHub</a></div><div id="w-node-ec243fb8-8059-5bdb-528d-ce0b082ca19f-082ca187"><div class="footer-column-header">Flow</div><a href="https://docs.google.com/forms/d/e/1FAIpQLSer5ZX0pRWsXF0U0bsgW4Zo8Pmlw0V927ZydDq_ej-qyIJ9_A/viewform" target="_blank" class="new-footer-link">Business Development</a><a href="https://flow.com/node-operation" target="_blank" class="new-footer-link">Node Operation</a><a href="/token-distribution" class="new-footer-link">Token Distribution</a><a href="/mediakit" class="new-footer-link">Media Kit</a><a href="/careers" class="new-footer-link">Careers</a><a href="/faq" class="new-footer-link">FAQ</a></div><div id="w-node-ec243fb8-8059-5bdb-528d-ce0b082ca198-082ca187"><div class="footer-column-header">Get Connected</div><a href="https://port.onflow.org/" target="_blank" class="new-footer-link">Flow Port</a><a href="https://www.flowverse.co/" target="_blank" class="new-footer-link">Flowverse</a></div></div><div class="div-block-129"><div class="footer-copyright">© 2023 All Rights Reserved</div></div></div></div><script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=5f734f4dbd95382f4fdfa0ea" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script><script src="https://assets-global.website-files.com/5f734f4dbd95382f4fdfa0ea/js/webflow.2724f1538.js" type="text/javascript"></script><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NHJB3BPPXG"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-NHJB3BPPXG');
</script>

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PWSGFLB"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --><script src="../../cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="../../cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.js"></script></body>
<!-- Mirrored from flow.com/engineering-blogs/golang-services-improving-observability by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 22 Jul 2023 16:22:28 GMT -->
</html>